---
layout: post
title:  "promise的用法和分析"
date:   2019-09-07
categories: js promise
---

javacript 是单线程执行的，因此在执行一些网络操作，浏览器事件的时候，我们必须采用异步的方式。异步函数可以由回调函数实现：

```js
function cb () {
  console.log('this is cb');
}
setTimeout(cb, 100);
console.log('this is main thread')
```
在经过100ms之后输出： this is cb

在日常的开发中，经常遇到调用多个异步操作的情况
```js
ajax((err, data) {
  if (err) {
    console.log(err)
    return 
  }
  dosomething();
  ajax((err, data) {
    dosomething2()
    ajax((err, data) {
      dosomething3()
      ...
    });
    ...
  })
  ...
})
```
遇到这种情况的时候，会出现两个比较头疼的问题：
- 层层嵌套的代码，使我们可读性不高。要想了解代码就必须层层深入，每一层执行的函数我们还得看这个函数是异步函数还是同步函数。
- 在回调的过程中，我们很容易丢失掉代码的控制权。比如说在:第一层回调之后，执行了dosomething(), 我并不知道这个dosomething到底干了什么。

## 什么是promise？

## promise解决什么问题？

## Promise用法

## 如何手动实现一个简单的Promise